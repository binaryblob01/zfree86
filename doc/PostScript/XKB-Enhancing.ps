%!PS-Adobe-3.0
%%Creator: groff version 1.19.2
%%CreationDate: Sun Dec 28 21:39:40 2008
%%DocumentNeededResources: font Helvetica-Bold
%%+ font Palatino-Roman
%%+ font Palatino-Bold
%%+ font Courier
%%+ font Times-Roman
%%+ font Palatino-Italic
%%DocumentSuppliedResources: procset grops 1.19 2
%%Pages: 10
%%PageOrder: Ascend
%%DocumentMedia: Default 612 792 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginResource: procset grops 1.19 2
%!PS-Adobe-3.0 Resource-ProcSet
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/Fr{
setrgbcolor fill
}bind def
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
/Fg{
setgray fill
}bind def
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
/setpagedevice{}def
}bind def
/PEND{
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%EndProlog
%%BeginSetup
%%BeginFeature: *PageSize Default
<< /PageSize [ 612 792 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Helvetica-Bold
%%IncludeResource: font Palatino-Roman
%%IncludeResource: font Palatino-Bold
%%IncludeResource: font Courier
%%IncludeResource: font Times-Roman
%%IncludeResource: font Palatino-Italic
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/Euro/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Palatino-Italic@0 ENC0/Palatino-Italic RE/Times-Roman@0 ENC0
/Times-Roman RE/Courier@0 ENC0/Courier RE/Palatino-Bold@0 ENC0
/Palatino-Bold RE/Palatino-Roman@0 ENC0/Palatino-Roman RE
/Helvetica-Bold@0 ENC0/Helvetica-Bold RE
%%EndSetup
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 18/Helvetica-Bold@0 SF(Ho)123.939 188 Q 5.004(wt)-.27 G 5.004(of)
-5.004 G -4.644(ur ther)-5.004 F(enhance XKB con\214guration)5.004 E/F1
10/Palatino-Roman@0 SF(Kamil T)242.26 206 Q(oman, Ivan U. Pascal)-.92 E
(25 November 2002)264.845 224 Q/F2 10/Palatino-Bold@0 SF(Abstract)286.84
272 Q F1 1.313(This guide is aimed to r)117.5 290 R 1.313
(elieve one's labour to cr)-.18 F 1.313
(eate a new \(internationalized\) key-)-.18 F(boar)115 302 Q 4.866(dl)
-.18 G 2.366(ayout. Unlike other documents this guide accents the keyma\
p developer's)-4.866 F(point of view.)115 314 Q/F3 16/Helvetica-Bold@0
SF 4.448(1. Over)90 368 R(vie).16 E(w)-.24 E F1 .08
(The developer of a new layout should r)90 386 R .079(ead the xkb pr)
-.18 F .079(otocol speci\214cation \(The X Keyboar)-.18 F 2.579(dE)-.18
G(xten-)-2.579 E 1.928(sion: Pr)90 398 R 1.928(otocol Speci\214cation)
-.18 F/F4 10/Courier@0 SF(<URL:http://www.x-docs.org/XKB/XKBproto.pdf>)
4.428 E F1 4.428(\)a)C 4.428(tl)-4.428 G(east)-4.428 E .239(to clarify \
for himself some xkb-speci\214c terms used in this document and elsewhe\
r)90 410 R 2.738(ei)-.18 G 2.738(nx)-2.738 G .238(kb con\214g-)-2.738 F
1.207(uration. Also it shows wise to understand how the X server and a \
client digest their keyboar)90 422 R(d)-.18 E
(inputs \(with and without xkb\).)90 434 Q 16.865(Au)90 452 S 14.365
(seful sour)-16.865 F 14.365(ce is also Ivan)-.18 F 14.365
(Pascal's text about xkb con\214guration)19.365 F F4
(<URL:http://www.tsu.ru/~pascal/en/xkb>)90 464 Q F1(often r)2.5 E(efer)
-.18 E(enced thr)-.18 E(oughout this document.)-.18 E .048
(Note that this document covers only enhancements which ar)90 482 R
2.549(et)-.18 G 2.549(ob)-2.549 G 2.549(em)-2.549 G .049(ade to XFr)
-2.549 F .049(ee86 version 4.3.x)-.18 F(and above.)90 494 Q F3 4.448
(2. The)90 524 R(Basics)4.448 E F1 .594(At the startup \(or at later at\
 user's command\) X server starts its xkb keyboar)90 542 R 3.094(dm)-.18
G .594(odule extension)-3.094 F(and r)90 554 Q(eads data fr)-.18 E
(om a compiled con\214guration \214le.)-.18 E .586
(This compiled con\214guration \214le is pr)90 572 R(epar)-.18 E .587
(ed by the pr)-.18 F(ogram)-.18 E F4(xkbcomp)3.087 E F1 .587
(which behaves altogether)3.087 F 1.44(as an or)90 584 R 1.44
(dinary compiler \(see)-.18 F F4 1.439(man xkbcomp)3.939 F F1 3.939
(\). Its)B 1.439(input ar)3.939 F 3.939(eh)-.18 G 1.439(uman r)-3.939 F
1.439(eadable xkb con\214guration)-.18 F .83(\214les which ar)90 596 R
3.33(ev)-.18 G .831(eri\214ed and then composed into a useful xkb con\
\214guration. Users don't need to)-3.33 F 2.148(mess with)90 608 R F4
(xkbcomp)4.648 E F1 2.147(themselves, for them it is invisible. Usually)
4.648 F 4.647(,i)-1.11 G 4.647(ti)-4.647 G 4.647(ss)-4.647 G 2.147
(tarted upon X server)-4.647 F(startup.)90 620 Q(As you pr)90 638 Q
(obably alr)-.18 E(eady know)-.18 E 2.5(,t)-.92 G
(he xkb con\214guration consists of \214ve main modules:)-2.5 E
(Keycodes)120 656 Q -.92(Ta)150 668 S 1.02
(bles that de\214nes translation fr).92 F 1.02(om keyboar)-.18 F 3.52
(ds)-.18 G 1.02(can codes into r)-3.52 F 1.02(easonable symbolic)-.18 F
1.873(names, maximum, minimum legal keycodes, symbolic aliases and desc\
ription of)150 680 R .376(physically pr)150 692 R .376
(esent LED-indicators. The primary sence of this component is to allow)
-.18 F .497(de\214nitions of maps of symbols \(see below\) to be indepe\
ndent of physical keyboar)150 704 R(d)-.18 E 1.819(scancodes. Ther)150
716 R 4.319(ea)-.18 G 2.179 -.18(re t)-4.319 H 1.819
(wo main naming conventions for symbolic names \(always).18 F
(four bytes long\):)150 728 Q/F5 10/Times-Roman@0 SF(Ho)90 768 Q 2.5(wt)
-.25 G 2.5(of)-2.5 G(urther enhance XKB con\214guration)-2.5 E(1)253.12
E 0 Cg EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(Ho)90 48 Q 2.5(wt)-.25 G 2.5(of)-2.5 G
(urther enhance XKB con\214guration)-2.5 E(2)253.12 E/F1 8
/Palatino-Roman@0 SF<83>165.152 96 Q/F2 10/Palatino-Roman@0 SF .042
(names which expr)7.542 F .042(ess some traditional meaning like)-.18 F
/F3 10/Courier@0 SF(<SPCE>)2.542 E F2 .041(\(stands for space)2.542 F
(bar\) or)175 108 Q F1<83>165.152 126 Q F2 1.176(names which expr)8.676
F 1.176(ess some r)-.18 F 1.176(elative positioning on a keyboar)-.18 F
1.177(d, for example)-.18 F F3(<AE01>)175 138 Q F2 .915
(\(an exclamation mark on US keyboar)3.415 F .915
(ds\), on the right ther)-.18 F 3.415(ea)-.18 G 1.275 -.18(re k)-3.415 H
(eys).18 E F3(<AE02>)175 150 Q F2(,)A F3(<AE03>)2.5 E F2(etc.)2.5 E -.9
(Ty)120 168 S(pes).9 E -.9(Ty)150 180 S 1.712(pes describe how the pr).9
F 1.713(oduced key is changed by active modi\214ers \(like Shift,)-.18 F
(Contr)150 192 Q .441(ol, Alt, ...\). Ther)-.18 F 2.941(ea)-.18 G .801
-.18(re s)-2.941 H .441(everal pr).18 F .441
(ede\214ned types which cover most of used com-)-.18 F(binations.)150
204 Q(Compat)120 222 Q 2.016(Compatibility component de\214nes internal\
 behaviour of modi\214ers. Using compat)150 234 R 1.111(component you c\
an assign various actions \(elaborately described in xkb speci\214ca-)
150 246 R 3.122(tion\) to key events. This is also the place wher)150
258 R 5.623(eL)-.18 G 3.123(ED-indicators behaviour is)-5.623 F
(de\214ned.)150 270 Q(Symbols)120 288 Q 1.094(For i18n purposes, this i\
s the most important table. It de\214nes what values \(=sym-)150 300 R
2.798(bols\) ar)150 312 R 5.298(ea)-.18 G 2.798
(ssigned to what keycodes \(r)-5.298 F(epr)-.18 E 2.798
(esented by their symbolic name, see)-.18 F .067(above\). Ther)150 324 R
2.567(em)-.18 G .067(ay be de\214ned mor)-2.567 F 2.567(et)-.18 G .066
(han one value for each key and then it depends)-2.567 F 1.098
(on a key type and on modi\214ers state \(r)150 336 R 1.099
(espective compat component\) which value)-.18 F(will be the r)150 348 Q
(esulting one.)-.18 E(Geometry)120 366 Q .206(Geometry \214les ar)150
378 R .205
(en't used by xkb itself but they may be used by some external pr)-.18 F
(o-)-.18 E(grams to depict a keyboar)150 390 Q 2.5(di)-.18 G(mage.)-2.5
E 1.041(All these components have the \214les located in xkb con\214gur\
ation tr)90 414 R 1.041(ee in subdir)-.18 F 1.041(ectories with the)-.18
F(same names \(usually in)90 426 Q F3(/usr/lib/X11/xkb)2.5 E F2(\).)A/F4
16/Helvetica-Bold@0 SF 4.448(3. Enhancing)90 456 R(XKB Con\214guration)
4.448 E F2 .233(Most of xkb enhancements concerns a need to de\214ne ne\
w output symbols for the some input key)90 474 R .342
(events. In other wor)90 486 R .343
(ds, a need to de\214ne a new symbol map \(for a new language, standar)
-.18 F 2.843(do)-.18 G 2.843(rj)-2.843 G(ust)-2.843 E(to feel mor)90 498
Q 2.5(ec)-.18 G(omfortable when typing text\).)-2.5 E
(What do you need to do? Generally)90 516 Q 2.5(,y)-1.11 G
(ou have to de\214ne following things:)-2.5 E F1<83>105.152 534 Q F2
(the map of symbols itself)7.5 E F1<83>105.152 552 Q F2(the r)7.5 E
(ules to allow users to select the new mapping)-.08 E F1<83>105.152 570
Q F2(the description of the new layout)7.5 E 1.019
(First of all, it is good to go thr)90 588 R 1.018
(ough existing layouts and to examine them if ther)-.18 F 3.518(ei)-.18
G 3.518(ss)-3.518 G(omething)-3.518 E .156
(you could easily adjust to \214t your needs.)90 600 R .157
(Even if ther)5.157 F 2.657(ei)-.18 G 2.657(sn)-2.657 G .157
(othing similar you may get some ideas)-2.657 F
(about basic concepts and used tricks.)90 612 Q/F5 14/Helvetica-Bold@0
SF 3.892(3.1 Le)90 634 R(vels And Gr)-.21 E(oups)-.28 E F2 .934
(Since XFr)90 652 R .934(ee86 4.3.0 you can use)-.18 F/F6 10
/Palatino-Bold@0 SF(multi-layout)3.434 E F2 .934
(concept of xkb con\214guration.)3.434 F .934(Though it is still in)
5.934 F .928(boundaries of xkb pr)90 664 R .929
(otocol and general ideas, the keymap designer must obey new r)-.18 F
.929(ules when)-.08 F(cr)90 676 Q
(eating new maps. In exchange we get a mor)-.18 E 2.5(ep)-.18 G
(owerful and cleaner con\214guration system.)-2.5 E 1.379(Remember that\
 it is the application which must decide which symbol matches which key\
code)90 694 R(accor)90 706 Q .332(ding to ef)-.18 F .333(fective modi\
\214er state. The X server itself sends only an input event message to.\
 Of)-.18 F 1.168(course, usually the general interpr)90 718 R 1.167
(etation is pr)-.18 F 1.167(ocessed by Xlib, Xaw)-.18 F 3.667(,M)-.92 G
1.167(otif, Qt, Gtk and similar)-3.667 F(libraries. The X server only s\
upplies its mapping table \(usually upon an application startup\).)90
730 Q 0 Cg EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(Ho)90 48 Q 2.5(wt)-.25 G 2.5(of)-2.5 G
(urther enhance XKB con\214guration)-2.5 E(3)253.12 E/F1 10
/Palatino-Roman@0 SF -.92(Yo)90 96 S 2.51(uc).92 G .01
(an think of the X server's symbol table as of a irr)-2.51 F .01
(egular table wher)-.18 F 2.51(ee)-.18 G .01(ach keycode has its r)-2.51
F(ow)-.18 E .385(and wher)90 108 R 2.885(ee)-.18 G .385
(ach combination of modi\214ers determines exactly one column. The r)
-2.885 F .384(esulting cell then)-.18 F .136(gives the pr)90 120 R .137
(oper symbolic value. Not all keycodes need to bind dif)-.18 F(fer)-.18
E .137(ent values for dif)-.18 F(fer)-.18 E .137(ent com-)-.18 F .622
(bination of modi\214ers.)90 132 R/F2 10/Courier@0 SF(<ENTER>)5.622 E F1
(key)3.122 E 3.122(,f)-1.11 G .621
(or instance, usually doesn't depend on any modi\214ers so it)-3.122 F
(its r)90 144 Q(ow has only one column de\214ned.)-.18 E 1.358
(Note that in XKB ther)90 162 R 3.859(ei)-.18 G 3.859(sn)-3.859 G 3.859
(op)-3.859 G 1.359(rior assumption that certain modi\214ers ar)-3.859 F
3.859(eb)-.18 G 1.359(ound to certain col-)-3.859 F .687
(umns. By editing pr)90 174 R .687(oper \214les \(see)-.18 F/F3 10
/Palatino-Italic@0 SF(keytypes)3.186 E F1 .686
(\(section 4.2, page 4\)\) this mapping can be changed as)3.186 F(well.)
90 186 Q .398(Unlike the original X pr)90 204 R .399
(otocol the XKB appr)-.18 F .399(oach is far mor)-.18 F 2.899<658d>-.18
G .399(exible. It is comfortable to add one)-2.899 F .02
(additional XKB term - gr)90 216 R .02(oup. Y)-.18 F .02
(ou can think of a gr)-.92 F .02
(oup as of a vector of columns per each keycode)-.18 F 1.276
(\(naturally the dimension of this vector may dif)90 228 R 1.277
(fer for dif)-.18 F(fer)-.18 E 1.277
(ent keycodes\). What is it good for?)-.18 F 1.406(The gr)90 240 R 1.406
(oup is not very useful unless you intend to use mor)-.18 F 3.906(et)
-.18 G 1.406(han one logically dif)-3.906 F(fer)-.18 E 1.405(ent set of)
-.18 F .259(symbols \(like mor)90 252 R 2.759(et)-.18 G .259(han one al\
phabet\) de\214ned in a single mapping table. But then, the gr)-2.759 F
.26(oup has)-.18 F 3.08(an)90 264 S .58
(atural meaning - each symbol set has its own gr)-3.08 F .58
(oup and changing it means selecting a dif)-.18 F(fer)-.18 E(-)-.18 E
1.095(ent one.)90 276 R 1.095(XKB appr)6.095 F 1.095
(oach allows up to four dif)-.18 F(fer)-.18 E 1.095(ent gr)-.18 F 1.096
(oups. The columns inside each gr)-.18 F 1.096(oup ar)-.18 F(e)-.18 E
.765(called \(shift\) levels. The X server knows the curr)90 288 R .765
(ent gr)-.18 F .765(oup and r)-.18 F .764
(eports it together with modi\214er)-.18 F
(set and with a keycode in key events.)90 300 Q 1.84 -.92(To s)90 318 T
(um it up:).92 E/F4 8/Palatino-Roman@0 SF<83>105.152 336 Q F1 .716
(for each keycode XKB keyboar)8.216 F 3.216(dm)-.18 G .717
(ap contains up to four one-dimensional tables - gr)-3.216 F(oups)-.18 E
(\(logically dif)115 348 Q(fer)-.18 E(ent symbol sets\))-.18 E F4<83>
105.152 366 Q F1 .552(for each gr)8.052 F .551
(oup of a keycode XKB keyboar)-.18 F 3.051(dm)-.18 G .551
(ap contains some columns - shift levels \(val-)-3.051 F(ues r)115 378 Q
(eached by combinations of Shift, Ctrl, Alt, ...)-.18 E(modi\214ers\))5
E F4<83>105.152 396 Q F1(dif)7.5 E(fer)-.18 E(ent keycodes can have dif)
-.18 E(fer)-.18 E(ent number of gr)-.18 E(oups)-.18 E F4<83>105.152 414
Q F1(dif)7.5 E(fer)-.18 E(ent gr)-.18 E
(oups of one keycode can have dif)-.18 E(fer)-.18 E
(ent number of shift levels)-.18 E F4<83>105.152 432 Q F1(the curr)7.5 E
(ent gr)-.18 E(oup number is tracked by X server)-.18 E .018
(It is clear that if you sanely de\214ne levels, gr)90 450 R .018
(oups and sanely bind modi\214ers and associated actions)-.18 F .543
(you can have simultaneously loaded up to four dif)90 462 R(fer)-.18 E
.543(ent symbol sets wher)-.18 F 3.042(ee)-.18 G .542(ach of them would)
-3.042 F -.18(re)90 474 S(side in its own gr).18 E(oup.)-.18 E .51
(The multi-layout concept pr)90 492 R .51
(ovides a facility to manipulate xkb gr)-.18 F .51
(oups and symbol de\214nitions in)-.18 F 2.588(aw)90 504 S .088
(ay that allows almost arbitrary composition of pr)-2.588 F .088
(ede\214ned symbol tables. T)-.18 F 2.588(ok)-.92 G .088
(eep it fully func-)-2.588 F(tional you have to:)90 516 Q F4<83>105.152
534 Q F1(de\214ne all symbols only in the \214rst gr)7.5 E(oup)-.18 E F4
<83>105.152 552 Q F1(\(r)7.5 E
(e\)de\214ne any modi\214ers with extra car)-.18 E 2.5(et)-.18 G 2.5(oa)
-2.5 G(void strange \(anisometric\) behaviour)-2.5 E/F5 16
/Helvetica-Bold@0 SF 4.448(4. De\214ning)90 582 R(Ne)4.448 E 4.448(wL)
-.24 G -.32(ay)-4.448 G(outs)-.08 E F1 15.313(See Some W)90 600 R(or)
-.92 E 17.813(ds About)-.18 F 15.314(XKB internals)17.813 F F2
(<URL:http://www.tsu.ru/~pas-)17.814 E(cal/en/xkb/internals.html>)90 612
Q F1 .012(for explanation of used xkb terms and pr)2.512 F .012
(oblems addr)-.18 F .012(essed by)-.18 F(XKB extension.)90 624 Q 24.052
(See Common)90 642 R 24.053
(notes about XKB con\214guration \214les language)29.053 F F2
(<URL:http://www.tsu.ru/~pascal/en/xkb/gram-common.html>)90 654 Q F1
9.32(for mor)11.82 F 11.82(ep)-.18 G -.18(re)-11.82 G(cise).18 E
(explanation of syntax of xkb con\214guration \214les.)90 666 Q/F6 14
/Helvetica-Bold@0 SF 3.892(4.1 Prede\214ned)90 688 R(XKB Symbol Sets)
3.892 E F1 1.029(If you ar)90 706 R 3.529(ea)-.18 G 1.029
(bout to de\214ne some Eur)-3.529 F 1.03
(opean symbol map extension, you might want to use on of)-.18 F(four pr)
90 718 Q(ede\214ned latin alphabet layouts.)-.18 E(Okay)90 736 Q 3.629
(,l)-1.11 G 1.129(et's assume you want extend an existing keymap and yo\
u want to override a few keys.)-3.629 F 0 Cg EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(Ho)90 48 Q 2.5(wt)-.25 G 2.5(of)-2.5 G
(urther enhance XKB con\214guration)-2.5 E(4)253.12 E/F1 10
/Palatino-Roman@0 SF(Let's take a simple U.K. keyboar)90 96 Q 2.5(da)
-.18 G 2.5(sa)-2.5 G 2.5(ne)-2.5 G(xample \(de\214ned in)-2.5 E/F2 10
/Courier@0 SF(pc/gb)2.5 E F1(\):)A/F3 8/Courier@0 SF
(partial default alphanumeric_keys)110 112 Q(xkb_symbols "basic" {)110
122 Q(include "pc/latin")119.6 132 Q(name[Group1]="Great Britain";)119.6
152 Q(key <AE02>)119.6 172 Q 28.8 4.8({[ 2)9.6 H 14.4(,q)-4.8 G 4.8
(uotedbl, twosuperior,)-14.4 F(oneeighth ] };)19.2 E(key <AE03>)119.6
182 Q 28.8 4.8({[ 3)9.6 H 14.4(,s)-4.8 G(terling, threesuperior,)-14.4 E
(sterling ] };)19.2 E(key <AC11>)119.6 192 Q 4.8({[)9.6 G 38.4
(apostrophe, at,)-4.8 F(dead_circumflex, dead_caron] };)4.8 E
(key <TLDE>)119.6 202 Q 9.6 4.8({[ g)9.6 H 14.4(rave, notsign,)-4.8 F
43.2(bar, bar)48 F 4.8(]})4.8 G(;)-4.8 E(key <BKSL>)119.6 212 Q 4.8({[)
9.6 G(numbersign, asciitilde,)-4.8 E 9.6(dead_grave, dead_breve)14.4 F
4.8(]})4.8 G(;)-4.8 E(key <RALT>)119.6 222 Q 4.8({t)9.6 G
(ype[Group1]="TWO_LEVEL",)-4.8 E 4.8([I)186.8 232 S
(SO_Level3_Shift, Multi_key ])-4.8 E(};)14.4 E(modifier_map Mod5)119.6
252 Q 4.8({<)14.4 G(RALT> };)-4.8 E(};)110 262 Q F1 .966
(It de\214nes a new layout in)90 280 R F2(basic)3.466 E F1 .966
(variant as an extension of common latin alphabet layout. The)3.466 F
.45(layout \(symbol set\) name is set to "Gr)90 292 R .449
(eat Britain".)-.18 F .449(Then ther)5.449 F 2.949(ea)-.18 G .809 -.18
(re re)-2.949 H .449(de\214nitions of a few keycodes).18 F 1.902(and a \
modi\214ers binding. As you can see the number of shift levels is the s\
ame for)90 304 R F2(<AE02>)4.403 E F1(,)A F2(<AE03>)90 316 Q F1(,)A F2
(<AC11>)2.612 E F1(,)A F2(<TLDE>)2.612 E F1(and)2.612 E F2(<BKSL>)2.612
E F1 .112(keys but it dif)2.612 F .112(fers fr)-.18 F .112
(om number of shift levels of)-.18 F F2(<RALT>)2.612 E F1(.)A .51
(Note that the)90 334 R F2(<RALT>)3.01 E F1 .511(key itself is a bindin\
g key for Mod5 and that it serves like a shift modi\214er)3.01 F .61
(for LevelThr)90 346 R .61
(ee, together with Shift as a multi-key. It is a good habit to r)-.18 F
.609(espect this r)-.18 F .609(ule in a new)-.08 F(similar layout.)90
358 Q(Okay)90 376 Q 3.073(,y)-1.11 G .573(ou could now de\214ne mor)
-3.073 F 3.073(ev)-.18 G .573(ariants of your new layout besides)-3.073
F F2(basic)3.074 E F1 .574(simply by includ-)3.074 F(ing \(augmenting/o\
verriding/...\) the basic de\214nition and altering what may be needed.)
90 388 Q/F4 14/Helvetica-Bold@0 SF 3.892(4.2 K)90 410 R .42 -.21(ey T)
-.21 H(ypes)-.63 E F1 .053(The dif)90 428 R(fer)-.18 E .053
(ences in the number of columns \(shift levels\) ar)-.18 F 2.553(ec)-.18
G .053(aused by a dif)-2.553 F(fer)-.18 E .053(ent types of keys \(see)
-.18 F 2.159(the types de\214nition in section basics\).)90 440 R 2.159
(Most keycodes have implicitly set the keytype in the)7.159 F(included)
90 452 Q F2("pc/latin")2.839 E F1 .339(\214le to)2.839 F F2
("FOUR_LEVEL_ALPHABETIC")2.839 E F1 2.839(.T)C .339
(he only exception is)-2.839 F F2(<RALT>)2.839 E F1(key-)2.839 E
(code which is explicitly set)90 464 Q F2("TWO_LEVEL")2.5 E F1(keytype.)
2.5 E .752(All those names r)90 482 R .752(efer to pr)-.18 F .753(e-de\
\214ned shift level schemes. Usually you can choose a suitable shift)
-.18 F(level scheme fr)90 494 Q(om)-.18 E F2(default)2.5 E F1
(types scheme list in pr)2.5 E(oper xkb component's subdir)-.18 E
(ectory.)-.18 E(The most used schemes ar)90 512 Q(e:)-.18 E(ONE_LEVEL)
120 530 Q 1.119
(The key does not depend on any modi\214ers. The symbol fr)150 542 R
1.119(om \214rst level is always)-.18 F(chosen.)150 554 Q(TWO_LEVEL)120
572 Q .598
(The key uses a modi\214er Shift and may have two possible values.)150
584 R .599(The second level)5.599 F 1.164(may be chosen by Shift modi\
\214er. If Lock modi\214er \(usually Caps-lock\) applies the)150 596 R
3.572(symbol is further pr)150 608 R 3.572
(ocessed using system-speci\214c capitalization r)-.18 F 3.573
(ules. If both)-.08 F .197(Shift+Lock modi\214er apply the symbol fr)150
620 R .196(om the second level is taken and capitaliza-)-.18 F(tion r)
150 632 Q(ules ar)-.08 E 2.5(ea)-.18 G(pplied \(and usually have no ef)
-2.5 E(fect\).)-.18 E(ALPHABETIC)120 650 Q .142(The key uses modi\214er\
s Shift and Lock. It may have two possible values. The second)150 662 R
1.795(level may be chosen by Shift modi\214er. When Lock modi\214er app\
lies, the symbol)150 674 R(fr)150 686 Q .885
(om the \214rst level is taken and further pr)-.18 F .886
(ocessed using system-speci\214c capitaliza-)-.18 F .348(tion r)150 698
R .347(ules. If both Shift+Lock modi\214er apply the symbol fr)-.08 F
.347(om the \214rst level is taken)-.18 F .056(and no capitalization r)
150 710 R .056
(ules applied. This is often called shift-cancels-caps behaviour.)-.08 F
0 Cg EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(Ho)90 48 Q 2.5(wt)-.25 G 2.5(of)-2.5 G
(urther enhance XKB con\214guration)-2.5 E(5)253.12 E/F1 10
/Palatino-Roman@0 SF(THREE_LEVEL)120 96 Q .849(Is the same as TWO_LEVEL\
 but it considers an extra modi\214er - LevelThr)150 108 R .848
(ee which)-.18 F .559(can be used to gain the symbol value fr)150 120 R
.559(om the thir)-.18 F 3.06(dl)-.18 G .56(evel. If both Shift+LevelThr)
-3.06 F(ee)-.18 E .235(modi\214ers apply the value fr)150 132 R .234
(om the thir)-.18 F 2.734(dl)-.18 G .234
(evel is also taken. As in TWO_LEVEL, the)-2.734 F 1.111
(Lock modi\214er doesn't in\215uence the r)150 144 R 1.111
(esulting level. Only Shift and LevelThr)-.18 F 1.111(ee ar)-.18 F(e)
-.18 E .948(taken into that consideration. If the Lock modi\214er is ac\
tive capitalization r)150 156 R .948(ules ar)-.08 F(e)-.18 E
(applied on the r)150 168 Q(esulting symbol.)-.18 E(FOUR_LEVEL)120 186 Q
.807(Is the same as THREE_LEVEL but unlike LEVEL_THREE if both Shift+Le\
velThr)150 198 R(ee)-.18 E(modi\214ers apply the symbol is taken fr)150
210 Q(om the fourth level.)-.18 E(FOUR_LEVEL_ALPHABETIC)120 228 Q 3.049
(Is similar to FOUR_LEVEL but also de\214nes shift-cancels-caps behavio\
ur as in)150 240 R 1.057(ALPHABETIC. If Lock+LevelThr)150 252 R 1.057
(ee apply the symbol fr)-.18 F 1.057(om the thir)-.18 F 3.558(dl)-.18 G
1.058(evel is taken)-3.558 F 1.034(and the capitalization r)150 264 R
1.034(ules ar)-.08 F 3.534(ea)-.18 G 3.534(pplied. If)-3.534 F
(Lock+Shift+LevelThr)3.534 E 1.034(ee apply the sym-)-.18 F(bol fr)150
276 Q(om the thir)-.18 E 2.5(dl)-.18 G
(evel is taken and no capitalization r)-2.5 E(ules ar)-.08 E 2.5(ea)-.18
G(pplied.)-2.5 E(KEYP)120 294 Q(AD)-.92 E 2.498
(As the name suggest this scheme is primarily used for numeric keypads.)
150 306 R(The)7.499 E .673(scheme considers two modi\214ers - Shift and\
 NumLock. If none of modi\214ers applies)150 318 R .567(the symbol fr)
150 330 R .567(om the \214rst level is taken. If either Shift or NumLoc\
k modi\214ers apply)-.18 F .49(the symbol fr)150 342 R .49
(om the second level is taken.)-.18 F .49
(If both Shift+NumLock modi\214ers apply)5.49 F(the symbol fr)150 354 Q
(om the \214rst level is taken. Again, shift-cancels-caps variant.)-.18
E(FOUR_LEVEL_KEYP)120 372 Q(AD)-.92 E .049(Is similar to KEYP)150 384 R
.049(AD scheme but considers also LevelThr)-.92 F .049(ee modi\214er.)
-.18 F .05(If LevelThr)5.049 F(ee)-.18 E 1.549
(modi\214er applies the symbol fr)150 396 R 1.548(om the thir)-.18 F
4.048(dl)-.18 G 1.548(evel is taken.)-4.048 F 1.548(If Shift+LevelThr)
6.548 F 1.548(ee or)-.18 F(NumLock+LevelThr)150 408 Q 3.318
(ee apply the symbol fr)-.18 F 3.318
(om the fourth level is taken. If all)-.18 F(Shift+NumLock+LevelThr)150
420 Q 2.551(ee modi\214ers apply the symbol fr)-.18 F 2.551(om the thir)
-.18 F 5.051(dl)-.18 G 2.551(evel is)-5.051 F
(taken. This also, shift-cancels-caps variant.)150 432 Q
(Besides that, ther)90 450 Q 2.5(ea)-.18 G .36 -.18(re s)-2.5 H
(everal schemes for special purposes:).18 E(PC_BREAK)120 468 Q 1.644
(It is similar to TWO_LEVEL scheme but it considers the Contr)150 480 R
1.645(ol modi\214er rather)-.18 F 2.23
(than Shift. That means, the symbol fr)150 492 R 2.23
(om the second level is chosen by Contr)-.18 F(ol)-.18 E
(rather than by Shift.)150 504 Q(PC_SYSRQ)120 522 Q 1.319(It is similar\
 to TWO_LEVEL scheme but it considers the Alt modi\214er rather than)150
534 R .397(Shift. That means, the symbol fr)150 546 R .397
(om the second level is chosen by Alt rather than by)-.18 F(Shift.)150
558 Q(CTRL+AL)120 576 Q(T)-.74 E 1.254
(The key uses modi\214ers Alt and Contr)150 588 R 1.254
(ol. It may have two possible values. If only)-.18 F .328
(one modi\214er \(Alt or Contr)150 600 R .328
(ol\) applies the symbol fr)-.18 F .328
(om the \214rst level is chosen. Only)-.18 F(if both Alt+Contr)150 612 Q
(ol modi\214ers apply the symbol fr)-.18 E
(om the second level is chosen.)-.18 E(SHIFT+AL)120 630 Q(T)-.74 E .646
(The key uses modi\214ers Shift and Alt. It may have two possible value\
s.)150 642 R .646(If only one)5.646 F .337
(modi\214er \(Alt or Shift\) applies the symbol fr)150 654 R .336
(om the \214rst level is chosen. Only if both)-.18 F
(Alt+Shift modi\214ers apply the symbol fr)150 666 Q
(om the second level is chosen.)-.18 E 2.443(If needed, special)90 684 R
/F2 10/Courier@0 SF(caps)4.943 E F1 2.444(schemes may be used. They r)
4.943 F 2.444(ede\214ne the standar)-.18 F 4.944(db)-.18 G 2.444
(ehaviour of all)-4.944 F F2(*ALPHABETIC)90 696 Q F1 .812
(types. The layouts \(maps of symbols\) with keys de\214ned in r)3.313 F
.812(espective types then)-.18 F
(automatically change their behaviour accor)90 708 Q(dingly. Possible r)
-.18 E(ede\214nitions ar)-.18 E(e:)-.18 E 0 Cg EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(Ho)90 48 Q 2.5(wt)-.25 G 2.5(of)-2.5 G
(urther enhance XKB con\214guration)-2.5 E(6)253.12 E/F1 8
/Palatino-Roman@0 SF<83>105.152 96 Q/F2 10/Palatino-Roman@0 SF(internal)
5 E F1<83>105.152 114 Q F2(internal_nocancel)5 E F1<83>105.152 132 Q F2
(shift)5 E F1<83>105.152 150 Q F2(shift_nocancel)5 E 2.45
(None of these schemes should be used dir)90 174 R 2.45(ectly. They ar)
-.18 F 4.95(ed)-.18 G 2.45(e\214ned mer)-4.95 F 2.45(ely for)-.18 F/F3
10/Courier@0 SF('caps:')4.95 E F2(xkb)4.95 E
(options \(used to globally change the layouts behaviour\).)90 186 Q
(Don't alter any of existing key types. If you need a dif)90 204 Q(fer)
-.18 E(ent behaviour cr)-.18 E(eate a new one.)-.18 E/F4 12
/Helvetica-Bold@0 SF 3.336(4.2.1 More)90 224 R(On De\214nitions Of T)
3.336 E(ypes)-.72 E F2 .286(When the XKB softwar)90 242 R 2.786(ed)-.18
G .286(eals with a separate type description it gets a complete list of\
 modi\214ers)-2.786 F 1.744(that should be taken into account fr)90 254
R 1.744(om the)-.18 F F3 1.744('modifiers=<list of modifiers>')4.244 F
F2 1.745(list and)4.245 F 2.821(expects that a set of)90 266 R F3 2.821
('map[<combination of modifiers>]=<list of modifiers>')5.321 F F2(instr)
90 278 Q 1.088(uctions that contain the mapping for each combination of\
 modi\214ers mentioned in that list.)-.08 F .04(Modi\214ers that ar)90
290 R 2.54(en)-.18 G .04(ot explicitly listed ar)-2.54 F 2.539(eN)-.18 G
.039(OT taken into account when the r)-2.539 F .039
(esulting shift level is)-.18 F 2.668(computed. If)90 302 R .168
(some combination is omitted the pr)2.668 F .169(ogram \(subr)-.18 F
.169(outine\) should choose the \214rst level)-.18 F
(for this combination \(a quite r)90 314 Q(easonable behavior\).)-.18 E
(Lets consider an example with two modi\214ers)90 332 Q F3(ModOne)2.5 E
F2(and)2.5 E F3(ModTwo)2.5 E F2(:)A/F5 8/Courier@0 SF(type "..." {)110
348 Q(modifiers = ModOne+ModTwo;)129.2 358 Q(map[None] = Level1;)129.2
368 Q(map[ModOne] = Level2;)129.2 378 Q(};)110 388 Q F2 .011
(In this case the map statements for)90 418 R F3(ModTwo)2.511 E F2 .011
(only and)2.511 F F3(ModOne+ModTwo)2.511 E F2(ar)2.51 E 2.51(eo)-.18 G
2.51(mitted. It)-2.51 F .01(means that)2.51 F .42(if the)90 430 R F3
(ModTwo)2.92 E F2 .42(is active the subr)2.92 F .42
(outine can't found explicit mapping for such combination an will)-.18 F
(use the)90 442 Q/F6 10/Palatino-Italic@0 SF(default level)2.5 E F2
(i.e. Level1.)2.5 E(But in the case the type described as:)90 460 Q F5
(type "..." {)110 476 Q(modifiers = ModOne;)129.2 486 Q
(map[None] = Level1;)129.2 496 Q(map[ModOne] = Level2;)129.2 506 Q(};)
110 516 Q F2 .35(the ModT)90 546 R .35
(wo will not be taken into account and the r)-.9 F .35
(esulting level depends on the ModOne state)-.18 F 1.191
(only. That means, ModT)90 558 R 1.191(wo alone pr)-.9 F 1.191
(oduces the Level1 but the combination ModOne+ModT)-.18 F(wo)-.9 E(pr)90
570 Q(oduces the Level2 as well as ModOne alone.)-.18 E 1.217(What does\
 it mean if the second modi\214er is the Lock? It means that in the \
\214rst case \(the Lock)90 588 R .576(itself is included in the list of\
 modi\214ers but combinations with this modi\214er ar)90 600 R .576
(en't mentioned in)-.18 F .727
(the map statements\) the internal capitalization r)90 612 R .727
(ules will be applied to the symbol fr)-.08 F .726(om the \214rst)-.18 F
.737(level. But in the second case the capitalization will be applied t\
o the symbol chosen accor)90 624 R(dingly)-.18 E
(to he \214rst modi\214er - and this can be the symbol fr)90 636 Q
(om the \214rst as well as fr)-.18 E(om the second level.)-.18 E
(Usually)90 654 Q 3.982(,a)-1.11 G 1.482(ll modi\214ers intr)-3.982 F
1.482(oduced in)-.18 F F3 1.482('modifiers=<list of modifiers>')3.982 F
F2 1.482(list ar)3.982 F 3.981(eu)-.18 G 1.481(sed for)-3.981 F 1.04
(shift level calculation and then discar)90 666 R 1.041
(ded. Sometimes this is not desirable. If you want to use a)-.18 F 2.463
(modi\214er for shift level calculation but you don't want to discar)90
678 R 4.963(di)-.18 G 2.463(t, you may list in ')-4.963 F F3(pre-)A
3.296(serve[<combination of modifiers>]=<list of modifiers>')90 690 R F2
5.796(.T)C 3.297(hat means, for a)-5.796 F 1.02
(given combination all listed modi\214ers will be pr)90 702 R 1.02
(eserved. If the Lock modi\214er is pr)-.18 F 1.02(eserved then)-.18 F
1.311(the r)90 714 R 1.311
(esulting symbol is passed to internal capitalization r)-.18 F 1.312
(outine r)-.18 F(egar)-.18 E 1.312(dless whether it has been)-.18 F
(used for a shift level calculation or not.)90 726 Q 0 Cg EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(Ho)90 48 Q 2.5(wt)-.25 G 2.5(of)-2.5 G
(urther enhance XKB con\214guration)-2.5 E(7)253.12 E/F1 10
/Palatino-Roman@0 SF 1.5(Any key type description can use both r)90 96 R
1.5(eal and virtual modi\214ers. Since r)-.18 F 1.5
(eal modi\214ers always)-.18 F 1.491(have standar)90 108 R 3.991(dn)-.18
G 1.491(ames it is not necessary to explicitly declar)-3.991 F 3.992(et)
-.18 G 1.492(hem. V)-3.992 F 1.492(irtual modi\214ers can have)-.55 F
(arbitrary names and can be declar)90 120 Q(ed \(prior using them\) dir)
-.18 E(ectly in key type de\214nition:)-.18 E/F2 8/Courier@0 SF
(virtual_modifiers <comma-separated list of modifiers>)110 136 Q(;)9.6 E
F1(as seen in for example)90 166 Q/F3 10/Courier@0 SF(basic)2.5 E F1(,)A
F3(pc)2.5 E F1(or)2.5 E F3(mousekeys)2.5 E F1(key type de\214nitions.)
2.5 E/F4 14/Helvetica-Bold@0 SF 3.892(4.3 Rules)90 188 R F1 1.902
(Once you ar)90 206 R 4.402<658c>-.18 G 1.902
(nished with your symbol map you need to add it to r)-4.402 F 1.901
(ules \214le. The r)-.08 F 1.901(ules \214le)-.08 F 1.895(describes how\
 all the \214ve basic keycodes, types, compat, symbols and geometry com\
ponents)90 218 R(should be composed to give a sensible r)90 230 Q
(esulting xkb con\214guration.)-.18 E .396(The main advantage of r)90
248 R .396(ules over formerly used keymaps is a possibility to simply p\
arameterize)-.08 F .842(\(once\) \214xed patterns of con\214gurations a\
nd thus to elegantly allow substitutions of various local)90 260 R
(con\214gurations into pr)90 272 Q(ede\214ned templates.)-.18 E 4.235
(Ap)90 290 S 1.735(attern in a r)-4.235 F 1.735
(ules \214le \(often located in)-.08 F F3(/usr/lib/X11/xkb/rules)4.235 E
F1 4.235(\)c)C 1.735(an be parameterized)-4.235 F .3(with four other ar)
90 302 R(guments:)-.18 E F3(Model)2.8 E F1(,)A F3(Layout)2.8 E F1(,)A F3
(Variant)2.8 E F1(and)2.8 E F3(Options)2.8 E F1 5.3(.F)C .3
(or most cases parameters)-5.3 F F3(model)90 314 Q F1(and)2.5 E F3
(layout)2.5 E F1(should be suf)2.5 E
(\214cient for choosing a functional keyboar)-.18 E 2.5(dm)-.18 G
(apping.)-2.5 E .582(The r)90 332 R .581
(ules \214le itself is composed of pattern lines and lines with r)-.08 F
.581(ules. The pattern line starts with)-.08 F .614
(an exclamation mark \(')90 344 R F3(!)A F1 .615
('\) and describes how will the xkb interpr)B .615
(et the following lines \(r)-.18 F .615(ules\). A)-.08 F(sample r)90 356
Q(ules \214le looks like this:)-.08 E F2 4.8(!m)110 372 S 110.4(odel =)
-4.8 F(keycodes)26.4 E 108(macintosh_old =)119.6 382 R(macintosh)26.4 E
(...)119.6 392 Q 134.4(*=)119.6 402 S(xfree86)-108 E 4.8(!m)110 422 S
110.4(odel =)-4.8 F(symbols)26.4 E 124.8(hp =)119.6 432 R(+inet\(%m\))
26.4 E 76.8(microsoftpro =)119.6 442 R(+inet\(%m\))26.4 E 81.6
(geniuscomfy =)119.6 452 R(+inet\(%m\))26.4 E 4.8(!m)110 472 S 16.8
(odel layout[1])-4.8 F 28.8(=s)48 G(ymbols)-28.8 E 14.4(macintosh us)
119.6 482 R 28.8(=m)64.8 G(acintosh/us%\(v[1]\))-28.8 E -57.6 62.4(** =)
119.6 492 T(pc/pc\(%m\)+pc/%l[1]%\(v[1]\))-28.8 E 4.8(!m)110 512 S 19.2
(odel layout[2])-4.8 F 28.8(=s)45.6 G(ymbols)-28.8 E 19.2(macintosh us)
119.6 522 R 21.6(=+)67.2 G(macintosh/us[2]%\(v[2]\):2)-21.6 E -48 57.6
(** =)119.6 532 T(+pc/%l[2]%\(v[2]\):2)-31.2 E 4.8(!o)110 552 S 100.8
(ption =)-4.8 F(types)31.2 E 103.2(caps:internal =)119.6 562 R
(+caps\(internal\))31.2 E 24(caps:internal_nocancel =)119.6 572 R
(+caps\(internal_nocancel\))31.2 E F1 .322(Each r)90 590 R .321(ule de\
\214nes what certain combination of values on the left side of equal si\
gn \(')-.08 F F3(=)A F1 .321('\) r)B .321(esults in.)-.18 F .936
(For example a \(keyboar)90 602 R .936(d\) model)-.18 F F3
(macintosh_old)3.437 E F1(instr)3.437 E .937
(ucts xkb to take de\214nitions of keycodes)-.08 F(fr)90 614 Q 2.654
(om \214le)-.18 F F3(keycodes/macintosh)5.153 E F1 2.653(while the r)
5.153 F 2.653(est of models \(r)-.18 F(epr)-.18 E 2.653
(esented by a wild car)-.18 F 5.153(d')-.18 G F3(*)-5.153 E F1('\))A
(instr)90 626 Q .248(ucts it to take them fr)-.08 F .248(om \214le)-.18
F F3(keycodes/xfree86)2.749 E F1 2.749(.T)C .249(he wild car)-2.749 F
2.749(dr)-.18 G(epr)-2.929 E .249(esents all possible val-)-.18 F 1.44
(ues on the left side which wer)90 638 R 3.94(en)-.18 G 1.439
(ot found in any of the pr)-3.94 F 1.439(evious r)-.18 F 3.939
(ules. The)-.08 F(mor)3.939 E 3.939(es)-.18 G(pecialized)-3.939 E(\(mor)
90 650 Q 2.934(ec)-.18 G .434(omplete\) r)-2.934 F .434
(ules have higher pr)-.08 F .434
(ecedence than general ones, i.e. the mor)-.18 F 2.935(eg)-.18 G .435
(eneral r)-2.935 F .435(ules sup-)-.08 F(ply r)90 662 Q
(easonable default values.)-.18 E .413(As you can see some lines contai\
n substitution parameters - the parameters pr)90 680 R .412
(eceded by the per)-.18 F(-)-.18 E .762(cent sign \(')90 692 R F3(%)A F1
.762('\). The \214rst alphabetical character after the per)B .762
(cent sign expands to the value which)-.18 F .265
(has been found on the left side. For example)90 704 R F3(+%l%\(v\))
2.765 E F1 .264(expands into)2.765 F F3(+cz\(bksl\))2.764 E F1 .264
(if the r)2.764 F(espective)-.18 E 2.178(values on the left side wer)90
716 R(e)-.18 E F3(cz)4.679 E F1 2.179(layout in its)4.679 F F3(bksl)
4.679 E F1 2.179(variant. Mor)4.679 F 2.179(e, if the layout r)-.18 F
2.179(esp. variant)-.18 F .401
(parameter is followed by a pair of brackets \(')90 728 R F3([)A F1 .401
(', ')B F3(])A F1 .4('\) it means that xkb should)B/F5 10
/Palatino-Italic@0 SF .4(place the layout r)2.9 F(esp.)-.18 E
(variant into speci\214ed xkb gr)90 740 Q(oup)-.18 E F1 2.5(.I)C 2.5(ft)
-2.5 G(he brackets ar)-2.5 E 2.5(eo)-.18 G(mitted the \214rst gr)-2.5 E
(oup is the default value.)-.18 E 0 Cg EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(Ho)90 48 Q 2.5(wt)-.25 G 2.5(of)-2.5 G
(urther enhance XKB con\214guration)-2.5 E(8)253.12 E/F1 10
/Palatino-Roman@0 SF 1.174(So the second block of r)90 96 R 1.175
(ules enhances symbol de\214nitions for some particular keyboar)-.08 F
3.675(dm)-.18 G(odels)-3.675 E .058
(with extra keys \(for internet, multimedia, ...\) . Other models ar)90
108 R 2.557(el)-.18 G .057(eft intact. Similarly)-2.557 F 2.557(,t)-1.11
G .057(he last block)-2.557 F 1.738(overrides some key type de\214nitio\
ns, so the common global behaviour ''shift cancels caps'' or)90 120 R
1.115(''shift doesn't cancel caps'' can be selected. The r)90 132 R
1.115(est of r)-.18 F 1.114(ules pr)-.08 F 1.114
(oduces special symbols for each)-.18 F(variant)90 144 Q/F2 10/Courier@0
SF(us)2.942 E F1 .442(layout of)2.942 F F2(macintosh)2.942 E F1(keyboar)
2.942 E 2.942(da)-.18 G .442(nd standar)-2.942 F 2.942(dp)-.18 G 2.942
(cs)-2.942 G .442(ymbols in appr)-2.942 F .443(opriate variants as a)
-.18 F(default.)90 156 Q/F3 14/Helvetica-Bold@0 SF 3.892
(4.4 Descriptive)90 178 R(Files of Rules)3.892 E F1 1.068
(Now you just need to add a detailed description to)90 196 R F2
(<rules>.xml)3.568 E F1 1.068(description \214le so the other)3.568 F
(users \(and external pr)90 208 Q
(ograms which often parse this \214le\) know what is your work about.)
-.18 E/F4 12/Helvetica-Bold@0 SF 3.336(4.4.1 Old)90 228 R
(Descriptive Files)3.336 E F1 1.018
(The formerly used descriptive \214les wer)90 246 R 3.518(en)-.18 G
(amed)-3.518 E F2(<rules>.lst)3.518 E F1 1.019(Its str)3.519 F(uctur)
-.08 E 3.519(ei)-.18 G 3.519(sv)-3.519 G 1.019(ery simple and)-3.519 F
.951(quite self descriptive but such simplicity had also some cavities,\
 for example ther)90 258 R 3.451(ew)-.18 G .951(as no way)-3.451 F 2.674
(how to describe local variants of layouts and ther)90 270 R 5.174(ew)
-.18 G(er)-5.174 E 5.174(ep)-.18 G -.18(ro)-5.174 G 2.675
(blems with the localization of).18 F .169(descriptions. T)90 282 R
2.669(op)-.92 G -.18(re)-2.669 G .168
(serve compatibility with some older pr).18 F .168
(ograms, new XML descriptive \214les can)-.18 F
(be converted to old format '.lst'.)90 294 Q 1.788
(For each parameter of r)90 312 R 1.788
(ules \214le should be described its meaning. For the r)-.08 F 1.788
(ules \214le described)-.08 F(above the)90 324 Q F2(.lst)2.5 E F1
(\214le could look like:)2.5 E/F5 8/Courier@0 SF 4.8(!m)110 340 S(odel)
-4.8 E 33.6(pc104 Generic)119.6 350 R(104-key PC)4.8 E 14.4
(microsoft Microsoft)119.6 360 R(Natural)4.8 E 38.4(pc98 PC-98xx)119.6
370 R(Series)4.8 E 19.2(macintosh Original)119.6 380 R(Macintosh)4.8 E
(...)119.6 390 Q 4.8(!l)110 410 S(ayout)-4.8 E 48(us U.S.)119.6 420 R
(English)4.8 E 48(cz Czech)119.6 430 R 48(de German)119.6 440 R(...)
119.6 450 Q 4.8(!o)110 470 S(ption)-4.8 E 72(caps:internal uses)119.6
480 R(internal capitalization. Shift cancels Caps)4.8 E(caps:internal_n\
ocancel uses internal capitalization. Shift doesn't cancel Caps)119.6
490 Q F1(And that should be it. Enjoy cr)90 518 Q
(eating your own xkb mapping.)-.18 E 0 Cg EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(Ho)90 48 Q 2.5(wt)-.25 G 2.5(of)-2.5 G
(urther enhance XKB con\214guration)-2.5 E(9)253.12 E 0 Cg EP
%%Page: 10 10
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Palatino-Roman@0 SF(CONTENTS)278.405 96 Q(1.)90 144 Q(Overview)
107.5 144 Q 7.5(.......................................................\
.......................................................................\
........... 1)164.5 144 R(2.)90 162 Q(The Basics)107.5 162 Q 7.5(......\
.......................................................................\
........................................................... 1)167 162 R
(3.)90 180 Q(Enhancing XKB Con\214guration)107.5 180 Q 7.5(............\
.......................................................................\
................. 2)257 180 R(3.1)107.5 192 Q(Levels And Gr)130 192 Q
(oups)-.18 E 7.5(......................................................\
......................................................... 2)229.5 192 R
(4.)90 210 Q(De\214ning New Layouts)107.5 210 Q 7.5(...................\
.......................................................................\
........................ 3)222 210 R(4.1)107.5 222 Q(Pr)130 222 Q
(ede\214ned XKB Symbol Sets)-.18 E 7.5(................................\
............................................................... 3)269.5
222 R(4.2)107.5 234 Q(Key T)130 234 Q(ypes)-.9 E 7.5(..................\
.......................................................................\
...................................... 4)189.5 234 R(4.3)107.5 246 Q
(Rules)130 246 Q 7.5(..................................................\
.......................................................................\
.............. 7)169.5 246 R(4.4)107.5 258 Q(Descriptive Files of Rules)
130 258 Q 7.5(.........................................................\
........................................... 8)257 258 R/F1 8/Courier@0
SF($XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/XKB-Enhancing.sgml\
,v 1.3 2005/02/06 22:41:40 dawes Exp $)150 274 Q/F2 10/Times-Roman@0 SF
(i)304.61 768 Q 0 Cg EP
%%Trailer
end
%%EOF
