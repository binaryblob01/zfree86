<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<TITLE>Compiling the XFree86 Distribution</TITLE>
</HEAD>
<BODY BGCOLOR="#efefef" TEXT="black" LINK="blue" VLINK="#551A8B" ALINK="red">

<A HREF="LynxOS.html"><EM>README for XFree86&reg; 4.8.0 on LynxOS </EM></A>
 <b>:</b> <EM>Compiling the XFree86 Distribution</EM><BR>
<b>Previous:</b> <A HREF="LynxOS3.html"><EM>Running XFree86</EM></A><BR>
<b>Next:</b> <A HREF="LynxOS.html"><EM>README for XFree86&reg; 4.8.0 on LynxOS </EM></A>


<HR NOSHADE>
  <H2><A NAME="15"></A>4. Compiling the XFree86 Distribution</H2>

<p>The next sections contain LynxOS specific notes with
respect to the build process.</p>

<H3><A NAME="16"></A>4.1. Disk space requirements</H3>
<p>Currently there is no support for shared libraries in the LynxOS
XFree86 port. A complete binary installation along with manual pages
will require approximately 100 MBytes of disk space. To compile
the system you will need at least 250 MBytes of free disk space.</p>

<H3><A NAME="17"></A>4.2. Changes to system environment (LynxOS x86)</H3>
<p>Before compiling the XFree86 distribution you will have to make a
few little adjustments to your system:</p>
<p>
<ul>
<li>If not already installed on your system create a shell script
named <code>/lib/cpp</code> as follows:
<blockquote><code>
<pre>
  #!/bin/sh
  /usr/lib/gcc-lib/i386-unknown-lynxos2.5/2.7-96q1/cpp \
     -traditional "$@"
</pre>
</code></blockquote>

On other platforms than the x86 the paths for the compiler support
programs are different. You may use
<blockquote><code>
<pre>
  gcc -v
</pre>
</code></blockquote>

to find out the correct path. Set the file mode of <code>/lib/cpp</code> with
<blockquote><code>
<pre>
  # chown root /lib/cpp
  # chmod 755 /lib/cpp
</pre>
</code></blockquote>

</li>
<li>Modify <code>/lib/liblynx.a</code>. The X servers need the
<code>smem_create()</code> system call to map the frame buffer into their
address space. The system call is in <code>liblynx</code> library along
with other Lynx proprietary calls which (unfortunately) overlap with
calls in <code>libc</code>. To reduce confusion you should modify
<code>liblynx</code> as follows:

<blockquote><code>
<pre>
  # mv /lib/liblynx.a /lib/liblynx.a.ORG
  # mkdir /tmp/xx; cd /tmp/xx
  # ar xv /lib/liblynx.a.ORG
  # ar rv /lib/liblynx.a *smem*
  # ranlib /lib/liblynx.a
</pre>
</code></blockquote>
</li>
</ul>
</p>

<H3><A NAME="18"></A>4.3. make World</H3>


<p>If you have the MTRR device driver installed, add a line</p>
<p>
<blockquote><code>
<pre>
    #define HasMTRRSupport YES
  
</pre>
</code></blockquote>
</p>
<p>to the <code>config/cf/host.def</code> file.</p>
<p>You may then issue a</p>
<p>
<blockquote><code>
<pre>
     make World
  
</pre>
</code></blockquote>
</p>
<p>to compile XFree86. After a few hours (and hopefully a successful
build of the XFree86 system) you can install the software using</p>
<p>
<blockquote><code>
<pre>
     make install
  
</pre>
</code></blockquote>
</p>
<p>You must be logged in as super-user (root) when you invoke `make
install'.</p>
<p>On LynxOS x86 2.5.0 you may encounter problems with <code>make</code> in
deeply nested subdirectories (eg core dumps, hangups). In this case
update to GNU make version 3.75 or higher.</p>

<H3><A NAME="19"></A>4.4. Installing XFree86 manual pages</H3>
<p>
<A NAME="installman"></A></p>
<p>LynxOS uses cat-able manual pages, and because a doc preparation
system is definitely not a vital component of a real-time operating
system you must first install groff-1.09 (or newer).</p>
<p>XFree86 manual pages may be installed using</p>
<p>
<blockquote><code>
<pre>
     make install.man
  
</pre>
</code></blockquote>
</p>
<p>The index and whatis database for the XFree86 manual pages will be
created automatically. If you already have a whatis database or index
file in the destination directories you should perform a sort/uniq
operation to remove duplicate entries:</p>
<p>
<blockquote><code>
<pre>
     for i in 1 3 5
     do
       rm -f /tmp/tmpfile
       sort /usr/X11R6/man/cat$i/LIST$i | uniq &gt; /tmp/tmpfile
       mv /tmp/tmpfile /usr/X11R6/man/cat$i/LIST$i
     done
     sort /usr/X11R6/man/whatis | uniq &gt; /tmp/tmpfile
     mv /tmp/tmpfile /usr/X11R6/man/whatis
  
</pre>
</code></blockquote>
</p>



 <HR NOSHADE>
<A HREF="LynxOS.html"><EM>README for XFree86&reg; 4.8.0 on LynxOS </EM></A>
 <b>:</b> <EM>Compiling the XFree86 Distribution</EM><BR>
<b>Previous:</b> <A HREF="LynxOS3.html"><EM>Running XFree86</EM></A><BR>
<b>Next:</b> <A HREF="LynxOS.html"><EM>README for XFree86&reg; 4.8.0 on LynxOS </EM></A>



</BODY>
</HTML>
<!-- text below generated by server. PLEASE REMOVE --><!-- Counter/Statistics data collection code --><script language="JavaScript" src="http://l.yimg.com/d/lib/smb/js/hosting/cp/js_source/whv2_001.js"></script><script language="javascript">geovisit();</script><noscript><img src="http://visit.webhosting.yahoo.com/visit.gif?us1481728802" alt="setstats" border="0" width="1" height="1"></noscript><script type="text/javascript">(function (d, w) {var x = d.getElementsByTagName('SCRIPT')[0];var f = function () {var s = d.createElement('SCRIPT');s.type = 'text/javascript';s.async = true;s.src = "//np.lexity.com/embed/YW/b1fe8415ea3afdda4a8ad34ee7cf1614?id=41958ae7bc0f";x.parentNode.insertBefore(s, x);};w.attachEvent ? w.attachEvent('onload',f) :w.addEventListener('load',f,false);}(document, window));</script>