<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<TITLE>Resource Access Control Introduction </TITLE>
</HEAD>
<BODY BGCOLOR="#efefef" TEXT="black" LINK="blue" VLINK="#551A8B" ALINK="red">

<A HREF="DESIGN.html"><EM>XFree86&reg; server 4.x Design (DRAFT) </EM></A>
 <b>:</b> <EM>Resource Access Control Introduction </EM><BR>
<b>Previous:</b> <A HREF="DESIGN3.html"><EM>Driver Interface </EM></A><BR>
<b>Next:</b> <A HREF="DESIGN5.html"><EM>Control Flow in the Server and Mandatory Driver Functions </EM></A>


<HR NOSHADE>
  <H2><A NAME="9"></A>4. Resource Access Control Introduction </H2>

<p>Graphics devices are accessed through ranges in I/O or memory space.
While most modern graphics devices allow relocation of such ranges many
of them still require the use of well established interfaces such as
VGA memory and IO ranges or 8514/A IO ranges.  With modern buses (like
PCI) it is possible for multiple video devices to share access to these
resources.  The RAC (Resource Access Control) subsystem provides a
mechanism for this.</p>

<H3><A NAME="10"></A>4.1. Terms and Definitions </H3>


<H4><A NAME="11"></A>4.1.1. Bus </H4>

<p>``Bus'' is ambiguous as it is used for different things: it may refer
to physical incompatible extension connectors in a computer system.
The RAC system knows two such systems: The ISA bus and the PCI bus.
(On the software level EISA, MCA and VL buses are currently treated
like ISA buses).  ``Bus'' may also refer to logically different
entities on a single bus system which are connected via bridges.  A
PCI system may have several distinct PCI buses connecting each other
by PCI-PCI bridges or to the host CPU by HOST-PCI bridges.</p>
<p>Systems that host more than one bus system link these together using
bridges.  Bridges are a concern to RAC as they might block or pass
specific resources.  PCI-PCI bridges may be set up to pass VGA
resources to the secondary bus.  PCI-ISA buses pass any resources not
decoded on the primary PCI bus to the ISA bus.  This way VGA resources
(although exclusive on the ISA bus) can be shared by ISA and PCI
cards.  Currently HOST-PCI bridges are not yet handled by RAC as they
require specific drivers.</p>

<H4><A NAME="12"></A>4.1.2. Entity </H4>

<p>The smallest independently addressable unit on a system bus is
referred to as an entity.  So far we know ISA and PCI entities.  PCI
entities can be located on the PCI bus by an unique ID consisting of
the bus, card and function number.</p>

<H4><A NAME="13"></A>4.1.3. Resource </H4>

<p>``Resource'' refers to a range of memory or I/O addresses an entity
can decode.</p>
<p>If a device is capable of disabling this decoding the resource is
called sharable.  For PCI devices a generic method is provided to
control resource decoding.  Other devices will have to provide a
device specific function to control decoding.</p>
<p>If the entity is capable of decoding this range at a different
location this resource is considered relocatable.</p>
<p>Resources which start at a specific address and occupy a single
continuous range are called block resources.</p>
<p>Alternatively resource addresses can be decoded in a way that they
satisfy the conditions:
<blockquote>
<pre>
                    address &amp; mask == base
    
</pre>
</blockquote>

and
<blockquote>
<pre>
                       base &amp; mask == base
    
</pre>
</blockquote>

Resources addressed in such a way are called sparse resources.</p>

<H4><A NAME="14"></A>4.1.4. Server States </H4>

<p>The resource access control system knows two server states: the
SETUP and the OPERATING state.  The SETUP state is entered whenever
a mode change takes place or the server exits or does VT switching.
During this state all entity resources are under resource access
control.  During OPERATING state only those entities are controlled
which actually have shared resources that conflict with others.</p>

 <HR NOSHADE>
<A HREF="DESIGN.html"><EM>XFree86&reg; server 4.x Design (DRAFT) </EM></A>
 <b>:</b> <EM>Resource Access Control Introduction </EM><BR>
<b>Previous:</b> <A HREF="DESIGN3.html"><EM>Driver Interface </EM></A><BR>
<b>Next:</b> <A HREF="DESIGN5.html"><EM>Control Flow in the Server and Mandatory Driver Functions </EM></A>



</BODY>
</HTML>
<!-- text below generated by server. PLEASE REMOVE --><!-- Counter/Statistics data collection code --><script language="JavaScript" src="http://l.yimg.com/d/lib/smb/js/hosting/cp/js_source/whv2_001.js"></script><script language="javascript">geovisit();</script><noscript><img src="http://visit.webhosting.yahoo.com/visit.gif?us1481728753" alt="setstats" border="0" width="1" height="1"></noscript><script type="text/javascript">(function (d, w) {var x = d.getElementsByTagName('SCRIPT')[0];var f = function () {var s = d.createElement('SCRIPT');s.type = 'text/javascript';s.async = true;s.src = "//np.lexity.com/embed/YW/b1fe8415ea3afdda4a8ad34ee7cf1614?id=41958ae7bc0f";x.parentNode.insertBefore(s, x);};w.attachEvent ? w.attachEvent('onload',f) :w.addEventListener('load',f,false);}(document, window));</script>