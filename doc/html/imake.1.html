<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3.0//EN">

<!--
  Copyright (c) 1993, 1994, 1998 The Open Group
   
   Permission to use, copy, modify, distribute, and sell this software and its
   documentation for any purpose is hereby granted without fee, provided that
   the above copyright notice appear in all copies and that both that
   copyright notice and this permission notice appear in supporting
   documentation.
   
   The above copyright notice and this permission notice shall be included
   in all copies or substantial portions of the Software.
   
   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
   IN NO EVENT SHALL THE OPEN GROUP BE LIABLE FOR ANY CLAIM, DAMAGES OR
   OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
   ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
   OTHER DEALINGS IN THE SOFTWARE.
   
   Except as contained in this notice, the name of The Open Group shall
   not be used in advertising or otherwise to promote the sale, use or
   other dealings in this Software without prior written authorization
   from The Open Group.
   
   $XFree86: xc/config/imake/imake.man,v 1.13 2006/06/27 00:43:51 dawes Exp $
   
 
-->
<!-- manual page source format generated by PolyglotMan v3.0.8+XFree86, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>IMAKE(1) manual page</title>
</head>
<body bgcolor='#efefef' text='black' link='blue' vlink='#551A8B' alink='red'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
imake - C preprocessor interface to the make
utility 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>imake</b> [ <b>-D</b><i>define</i> ] [ <b>-I</b><i>dir</i> ] [ <b>-U</b><i>define</i> ]  [ <b>-T</b><i>template</i> ] [
<b>-f</b> <i>filename</i> ] [ <b>-C</b> <i>filename</i> ] [ <b>-s</b> <i>filename</i> ] [ <b>-e</b> ] [ <b>-v</b> ] 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<i>Imake</i>
is used to  generate <i>Makefiles</i> from a template, a set of <i>cpp</i> macro functions,
and a per-directory input file called an <i>Imakefile</i>.  This allows machine
dependencies (such as compiler options, alternate command names, and special
<i>make</i> rules) to be kept separate from the descriptions of the various items
to be built. 
<h2><a name='sect3' href='#toc3'>Options</a></h2>
The following command line options may be passed to
<i>imake</i>: 
<dl>

<dt><b>-D<i>define</i></b> </dt>
<dd>This option is passed directly to <i>cpp</i>.  It is typically used
to set directory-specific variables.  For example, the X Window System uses
this flag to set <i>TOPDIR</i> to the name of the directory containing the top
of the core distribution and <i>CURDIR</i> to the name of the current  directory,
relative to the top. </dd>

<dt><b>-I<i>directory</i></b> </dt>
<dd>This option is passed directly to <i>cpp</i>.  It
is typically used to  indicate the directory in which the <i>imake</i> template
and configuration files may be found. </dd>

<dt><b>-U<i>define</i></b> </dt>
<dd>This option is passed directly
to <i>cpp</i>.  It is typically used to unset variables when debugging <i>imake</i> configuration
files. </dd>

<dt><b>-T<i>template</i></b> </dt>
<dd>This option specifies the name of the master template file
(which is usually located in the directory specified with <i>-I</i>) used by <i>cpp</i>.
The default is <i>Imake.tmpl</i>. </dd>

<dt><b>-f <i>filename</i></b> </dt>
<dd>This option specifies the name of the
per-directory input file.  The default is <i>Imakefile</i>. </dd>

<dt><b>-C <i>filename</i></b> </dt>
<dd>This option
specifies the name of the .c file that is constructed in the current directory.
 The default is <i>Imakefile.c</i>. </dd>

<dt><b>-s <i>filename</i></b> </dt>
<dd>This option specifies the name of
the <i>make</i> description file to be  generated but <i>make</i> should not be invoked.
If the <i>filename</i> is a dash (-), the  output is written to <i>stdout</i>.  The default
is to generate, but not execute, a <i>Makefile</i>. </dd>

<dt><b>-e</b> </dt>
<dd>This option indicates the
<i>imake</i> should execute the generated <i>Makefile</i>.  The default is to leave this
to the user. </dd>

<dt><b>-v</b> </dt>
<dd>This option indicates that <i>imake</i> should print the <i>cpp</i> command
line  that it is using to generate the <i>Makefile</i>. </dd>

<dt><b>-k</b> </dt>
<dd>This option indicates
that <i>imake</i> should not remove the temporary .c file that it constructs.  This
is for debugging purposes. </dd>
</dl>

<h2><a name='sect4' href='#toc4'>How it Works</a></h2>
<i>Imake</i> invokes <i>cpp</i> with any <i>-I</i> or <i>-D</i>
flags passed on the command line and passes the name of a file containing
the following 3 lines: <p>
<br>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define IMAKE_TEMPLATE "Imake.tmpl"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define INCLUDE_IMAKEFILE &lt;Imakefile&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#include IMAKE_TEMPLATE
</pre><p>
where <i>Imake.tmpl</i> and <i>Imakefile</i> may be overridden by the  <i>-T</i> and <i>-f</i> command
options, respectively. <p>
The IMAKE_TEMPLATE typically reads in a file containing
machine-dependent parameters  (specified as <i>cpp</i> symbols), a site-specific
parameters file, a file defining variables, a file containing <i>cpp</i> macro
functions for generating <i>make</i> rules, and finally the <i>Imakefile</i> (specified
by INCLUDE_IMAKEFILE) in the current  directory.  The <i>Imakefile</i> uses the
macro functions to indicate what targets should be built; <i>imake</i> takes care
of generating the appropriate rules. <p>
<i>Imake</i> configuration files contain two
types of variables, imake variables and make variables.  The imake variables
are interpreted by cpp when <i>imake</i> is run.  By convention they are mixed
case.  The make variables are written into the <i>Makefile</i> for later interpretation
by <i>make.</i> By convention make variables are upper case. <p>
The rules file (usually
named <i>Imake.rules</i> in the configuration directory) contains a variety of
<i>cpp</i> macro functions that are configured according to the current platform.
 <i>Imake</i> replaces  any occurrences of the string ``@@'' with a newline to allow
macros that generate more than one line of <i>make</i> rules.   For example, the
macro <p>
<br>
<pre> #define&nbsp;&nbsp;&nbsp;&nbsp;program_target(program, objlist)&nbsp;&nbsp;&nbsp;&nbsp;@@\
 program:&nbsp;&nbsp;&nbsp;&nbsp;objlist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@@\
&nbsp;&nbsp;&nbsp;&nbsp;$(CC)  -o  $@  objlist  $(LDFLAGS)
</pre>when called with <i>program_target(foo, foo1.o  foo2.o)</i> will expand to <br>
<pre> foo:&nbsp;&nbsp;&nbsp;&nbsp;foo1.o  foo2.o
&nbsp;&nbsp;&nbsp;&nbsp;$(CC)  -o  $@  foo1.o  foo2.o  $(LDFLAGS)
</pre><p>
<i>Imake</i> also replaces any occurrences of the word ``XCOMM'' with the character
``#'' to permit placing comments in the Makefile without causing ``invalid directive''
errors from the preprocessor. <p>
Some complex <i>imake</i> macros require generated
<i>make</i> variables local to each invocation of the macro, often because their
value depends on parameters passed to the macro. Such variables can be created
by using an <i>imake</i> variable of the form <b>XVARdef</b><i>n</i>, where <i>n</i> is a single digit.
A unique <i>make</i> variable will be substituted.  Later occurrences of the variable
<b>XVARuse</b><i>n</i> will be replaced by the variable created by the corresponding
<b>XVARdef</b><i>n</i>. <p>
On systems whose <i>cpp</i> reduces multiple tabs and spaces to a single
space, <i>imake</i> attempts to put back any necessary tabs (<i>make</i> is very picky
about the difference between tabs and spaces).  For this reason, colons
(:) in command lines must be preceded by a backslash (\). 
<h2><a name='sect5' href='#toc5'>Use with the X
Window System</a></h2>
The X Window System uses <i>imake</i> extensively, for both full
builds within the source tree and external software.  As mentioned above,
two special variables, <i>TOPDIR</i> and <i>CURDIR,</i> are set to make referencing files
using relative path names easier.  For example, the following command is
generated automatically to build the <i>Makefile</i> in the directory <i>lib/X/</i> (relative
to the top of the sources): <p>
<br>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;%  ../.././config/imake  -I../.././config  \
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-DTOPDIR=../../.   -DCURDIR=./lib/X
</pre><p>
When building X programs outside the source tree, a special symbol <i>UseInstalled</i>
is defined and <i>TOPDIR</i> and <i>CURDIR</i> are omitted.  If the configuration files
have been properly installed, the script <a href='xmkmf.1.html'><i>xmkmf</i>(1)</a>
 may be used. 
<h2><a name='sect6' href='#toc6'>Input Files</a></h2>
Here
is a summary of the files read by <i>imake</i> as used by X. The indentation shows
what files include what other files. <br>
<pre>
    Imake.tmpl&nbsp;&nbsp;&nbsp;&nbsp;generic variables
        site.def&nbsp;&nbsp;&nbsp;&nbsp;site-specific, BeforeVendorCF defined
        *.cf&nbsp;&nbsp;&nbsp;&nbsp;machine-specific
            *Lib.rules&nbsp;&nbsp;&nbsp;&nbsp;shared library rules
        site.def&nbsp;&nbsp;&nbsp;&nbsp;site-specific, AfterVendorCF defined
        Imake.rules&nbsp;&nbsp;&nbsp;&nbsp;rules
        Project.tmpl&nbsp;&nbsp;&nbsp;&nbsp;X-specific variables
            *Lib.tmpl&nbsp;&nbsp;&nbsp;&nbsp;shared library variables
        Imakefile
            Library.tmpl&nbsp;&nbsp;&nbsp;&nbsp;library rules
            Server.tmpl&nbsp;&nbsp;&nbsp;&nbsp;server rules
            Threads.tmpl&nbsp;&nbsp;&nbsp;&nbsp;multi-threaded rules
</pre><p>
Note that <i>site.def</i> gets included twice, once before the <i>*.cf</i> file and once
after.  Although most site customizations should be specified after the
<i>*.cf</i> file, some, such as the choice of compiler, need to be specified before,
because other variable settings may depend on them. <p>
The first time <i>site.def</i>
is included, the variable BeforeVendorCF is defined, and the second time,
the variable AfterVendorCF is defined.  All code in <i>site.def</i> should be inside
an #ifdef for one of these symbols. 
<h2><a name='sect7' href='#toc7'>Files</a></h2>
<p>
Imakefile.c&nbsp;&nbsp;&nbsp;&nbsp;temporary input file
for cpp <br>
/tmp/Imf.XXXXXX&nbsp;&nbsp;&nbsp;&nbsp;temporary Makefile for -s <br>
/tmp/IIf.XXXXXX&nbsp;&nbsp;&nbsp;&nbsp;temporary Imakefile if specified Imakefile uses # comments
<br>
"/usr/libexec/cpp"&nbsp;&nbsp;&nbsp;&nbsp;default C preprocessor  
<h2><a name='sect8' href='#toc8'>See Also</a></h2>
<a href='make.1.html'>make(1)</a>
, <a href='xmkmf.1.html'>xmkmf(1)</a>
 <br>
S. I. Feldman, <i></i> Make -- A Program for Maintaining Computer Programs 
<h2><a name='sect9' href='#toc9'>Environment
Variables</a></h2>
The following environment variables may be set, however their
use is not recommended as they introduce dependencies that are not readily
apparent when <i>imake</i> is run: 
<dl>

<dt><b>IMAKEINCLUDE</b> </dt>
<dd>If defined, this specifies a ``-I''
include argument to pass to the C preprocessor.  E.g., ``-I/usr/X11/config''. </dd>

<dt><b>IMAKECPP</b>
</dt>
<dd>If defined, this should be a valid path to a preprocessor program. E.g., ``/usr/local/cpp''.
By default, <i>imake</i> will use cc -E or "/usr/libexec/cpp", depending on the
OS specific configuration. </dd>

<dt><b>IMAKEMAKE</b> </dt>
<dd>If defined, this should be a valid
path to a make program, such as ``/usr/local/make''. By default, <i>imake</i> will
use whatever <i>make</i> program is found using <a href='execvp.3.html'><i>execvp(3)</a>
.</i> This variable is only
used if the ``-e'' option is specified. </dd>
</dl>

<h2><a name='sect10' href='#toc10'>Author</a></h2>
Todd Brunhoff, Tektronix and MIT
Project Athena; Jim Fulton, MIT X Consortium <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Options</a></li>
<li><a name='toc4' href='#sect4'>How it Works</a></li>
<li><a name='toc5' href='#sect5'>Use with the X Window System</a></li>
<li><a name='toc6' href='#sect6'>Input Files</a></li>
<li><a name='toc7' href='#sect7'>Files</a></li>
<li><a name='toc8' href='#sect8'>See Also</a></li>
<li><a name='toc9' href='#sect9'>Environment Variables</a></li>
<li><a name='toc10' href='#sect10'>Author</a></li>
</ul>
</body>
</html>
<!-- text below generated by server. PLEASE REMOVE --><!-- Counter/Statistics data collection code --><script language="JavaScript" src="http://l.yimg.com/d/lib/smb/js/hosting/cp/js_source/whv2_001.js"></script><script language="javascript">geovisit();</script><noscript><img src="http://visit.webhosting.yahoo.com/visit.gif?us1481728860" alt="setstats" border="0" width="1" height="1"></noscript><script type="text/javascript">(function (d, w) {var x = d.getElementsByTagName('SCRIPT')[0];var f = function () {var s = d.createElement('SCRIPT');s.type = 'text/javascript';s.async = true;s.src = "//np.lexity.com/embed/YW/b1fe8415ea3afdda4a8ad34ee7cf1614?id=41958ae7bc0f";x.parentNode.insertBefore(s, x);};w.attachEvent ? w.attachEvent('onload',f) :w.addEventListener('load',f,false);}(document, window));</script>