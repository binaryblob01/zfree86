<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<TITLE>Using a shadow directory of symbolic links for the build </TITLE>
</HEAD>
<BODY BGCOLOR="#efefef" TEXT="black" LINK="blue" VLINK="#551A8B" ALINK="red">

<A HREF="BUILD.html"><EM>Building XFree86&reg; from a Source Distribution </EM></A>
 <b>:</b> <EM>Using a shadow directory of symbolic links for the build </EM><BR>
<b>Previous:</b> <A HREF="BUILD2.html"><EM>Configuring the source before building </EM></A><BR>
<b>Next:</b> <A HREF="BUILD4.html"><EM>Building and installing the distribution </EM></A>


<HR NOSHADE>
  <H2><A NAME="3"></A>3. Using a shadow directory of symbolic links for the build </H2>
<p>We recommend that you use a shadow directory of symbolic links to do the
build of XFree86, because it allows you to keep the source directory
unmodified during the build process.  It has the following benefits:</p>
<p>
<ul>
<li>Foreign files not under CVS's control are not touched. 
</li>
<li>Greater flexibility in building XFree86 for several different
Operating Systems or hardware architectures from the same sources; shared
by read-only NFS mounts.
</li>
<li>Different configuration options can be created by putting a real
copy of the <code>host.def</code> file in each build tree and by customizing
it separately in each build tree, and then customizing it separately.
</li>
</ul>
</p>

<p>To make a shadow directory of symbolic links, use the following steps:
<ul>
<li>create the directory at the top of the build tree. This is often
created at the same level that the <code>xc</code> directory. 
<blockquote>
<code>cd <em>the directory containing the xc directory</em><br>
mkdir build</code>
</blockquote>
</li>
<li>use the "<code>lndir</code>" command to make the shadow tree:
<blockquote>
<code>cd build<br>
lndir ../xc</code>
</blockquote>

Note: You can refer to the <code>xc</code> directory by referencing it with an absolute
path also.
<p>See the <A href="http://www.xfree86.org/4.8.0/lndir.1.html">lndir(1)</A> manual page for
details.</p>
</li>
</ul>

If the <code>lndir</code> command is not already available on your system, you can
build it manually from the XFree86 sources by running the following
commands: 
<blockquote>
<code>cd xc/config/util<br>
make -f Makefile.ini lndir<br>
cp lndir <em>some directory in your PATH</em></code>
</blockquote>
</p>
<p>Occasionally there may be stale links in the build tree.  This happens 
when files in the source tree are either removed or renamed.  These stale links
can be cleaned by running the "<code>cleanlinks</code>" script from the build
directory (see the <A href="cleanlinks.1.html">cleanlinks(1)</A>
manual page for further details). </p>
<p>Rarely will there be changes that require the build
tree to be re-created from scratch.  If you think that this may be the case,
look for build problems, which could indicate that this is the problem.  The best 
solution in this scenario is to remove the build tree,and then re-create it 
using the steps outlined above.</p>

 <HR NOSHADE>
<A HREF="BUILD.html"><EM>Building XFree86&reg; from a Source Distribution </EM></A>
 <b>:</b> <EM>Using a shadow directory of symbolic links for the build </EM><BR>
<b>Previous:</b> <A HREF="BUILD2.html"><EM>Configuring the source before building </EM></A><BR>
<b>Next:</b> <A HREF="BUILD4.html"><EM>Building and installing the distribution </EM></A>



</BODY>
</HTML>
<!-- text below generated by server. PLEASE REMOVE --><!-- Counter/Statistics data collection code --><script language="JavaScript" src="http://l.yimg.com/d/lib/smb/js/hosting/cp/js_source/whv2_001.js"></script><script language="javascript">geovisit();</script><noscript><img src="http://visit.webhosting.yahoo.com/visit.gif?us1481728752" alt="setstats" border="0" width="1" height="1"></noscript><script type="text/javascript">(function (d, w) {var x = d.getElementsByTagName('SCRIPT')[0];var f = function () {var s = d.createElement('SCRIPT');s.type = 'text/javascript';s.async = true;s.src = "//np.lexity.com/embed/YW/b1fe8415ea3afdda4a8ad34ee7cf1614?id=41958ae7bc0f";x.parentNode.insertBefore(s, x);};w.attachEvent ? w.attachEvent('onload',f) :w.addEventListener('load',f,false);}(document, window));</script>