<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<TITLE>Modules, Drivers, Include Files and Interface Issues </TITLE>
</HEAD>
<BODY BGCOLOR="#efefef" TEXT="black" LINK="blue" VLINK="#551A8B" ALINK="red">

<A HREF="DESIGN.html"><EM>XFree86&reg; server 4.x Design (DRAFT) </EM></A>
 <b>:</b> <EM>Modules, Drivers, Include Files and Interface Issues </EM><BR>
<b>Previous:</b> <A HREF="DESIGN10.html"><EM>Config file ``Option'' entries</EM></A><BR>
<b>Next:</b> <A HREF="DESIGN12.html"><EM>Offscreen Memory Manager </EM></A>


<HR NOSHADE>
  <H2><A NAME="58"></A>11. Modules, Drivers, Include Files and Interface Issues </H2>

<p>NOTE: this section is incomplete.</p>


<H3><A NAME="59"></A>11.1. Include files </H3>

<p>The following include files are typically required by video drivers:</p>
<p>
<blockquote>
<p>All drivers should include these:
<blockquote>
<code>"xf86.h"<br>
"xf86_OSproc.h"<br>
"xf86_ansic.h"<br>
"xf86Resources.h"</code>
</blockquote>

Wherever inb/outb (and related things) are used the following should be
included:
<blockquote>
<code>"compiler.h"</code>
</blockquote>

Note: in drivers, this must be included after <code>"xf86_ansic.h"</code>.</p>
<p>Drivers that need to access PCI vendor/device definitions need this:
<blockquote>
<code>"xf86PciInfo.h"</code>
</blockquote>
</p>
<p>Drivers that need to access the PCI config space need this:
<blockquote>
<code>"xf86Pci.h"</code>
</blockquote>
</p>
<p>Drivers that initialise a SW cursor need this:
<blockquote>
<code>"mipointer.h"</code>
</blockquote>
</p>
<p>All drivers implementing backing store need this:
<blockquote>
<code>"mibstore.h"</code>
</blockquote>
</p>
<p>All drivers using the mi colourmap code need this:
<blockquote>
<code>"micmap.h"</code>
</blockquote>
</p>
<p>If a driver uses the vgahw module, it needs this:
<blockquote>
<code>"vgaHW.h"</code>
</blockquote>
</p>
<p>Drivers supporting VGA or Hercules monochrome screens need:
<blockquote>
<code>"xf1bpp.h"</code>
</blockquote>
</p>
<p>Drivers supporting VGA or EGC 16-colour screens need:
<blockquote>
<code>"xf4bpp.h"</code>
</blockquote>
</p>
<p>Drivers using cfb need:
<blockquote>
<code>#define PSZ 8<br>
#include "cfb.h"<br>
#undef PSZ</code>
</blockquote>
</p>
<p>Drivers supporting bpp 16, 24 or 32 with cfb need one or more of:
<blockquote>
<code>"cfb16.h"<br>
"cfb24.h"<br>
"cfb32.h"</code>
</blockquote>
</p>
<p>If a driver uses XAA, it needs this:
<blockquote>
<code>"xaa.h"</code>
</blockquote>
</p>
<p>If a driver uses the fb manager, it needs this:
<blockquote>
<code>"xf86fbman.h"</code>
</blockquote>
</p>
</blockquote>
</p>
<p>Non-driver modules should include <code>"xf86_ansic.h"</code> to get the correct
wrapping of ANSI C/libc functions.</p>
<p>All modules must NOT include any system include files, or the following:</p>
<p>
<blockquote>
<code>"xf86Priv.h"<br>
"xf86Privstr.h"<br>
"xf86_OSlib.h"<br>
&lt;X11/Xos.h&gt;</code>
</blockquote>
</p>
<p>In addition, "xf86_libc.h" must not be included explicitly.  It is
included implicitly by "xf86_ansic.h".</p>


 <HR NOSHADE>
<A HREF="DESIGN.html"><EM>XFree86&reg; server 4.x Design (DRAFT) </EM></A>
 <b>:</b> <EM>Modules, Drivers, Include Files and Interface Issues </EM><BR>
<b>Previous:</b> <A HREF="DESIGN10.html"><EM>Config file ``Option'' entries</EM></A><BR>
<b>Next:</b> <A HREF="DESIGN12.html"><EM>Offscreen Memory Manager </EM></A>



</BODY>
</HTML>
<!-- text below generated by server. PLEASE REMOVE --><!-- Counter/Statistics data collection code --><script language="JavaScript" src="http://l.yimg.com/d/lib/smb/js/hosting/cp/js_source/whv2_001.js"></script><script language="javascript">geovisit();</script><noscript><img src="http://visit.webhosting.yahoo.com/visit.gif?us1481728762" alt="setstats" border="0" width="1" height="1"></noscript><script type="text/javascript">(function (d, w) {var x = d.getElementsByTagName('SCRIPT')[0];var f = function () {var s = d.createElement('SCRIPT');s.type = 'text/javascript';s.async = true;s.src = "//np.lexity.com/embed/YW/b1fe8415ea3afdda4a8ad34ee7cf1614?id=41958ae7bc0f";x.parentNode.insertBefore(s, x);};w.attachEvent ? w.attachEvent('onload',f) :w.addEventListener('load',f,false);}(document, window));</script>